<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>Коллекция Ритмов Александра Йуркова</title>
    <!-- Mobile Specific Metas
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css?v=1.0">
</head>
<body>
    <div class="wrapper">
        <div class="wrapper-flex">
            <button class="flex-item" id="run">АЕАЕ</button>
            <label class="text-label flex-item"> на </label>
            <input class="flex-item" id="barCount", type="text" value="1"></input>
        </div>
        <div style="width: 100%; text-align: center;" id="result"></div>
        </div>
    </div>

    <script>
        const notes = ['D', 't', '-'];
        
        function getRythmStr(r, barLength) {
            ret = '';
            for (i=0; i < r.length; i++) {
                if (i && i % barLength == 0)
                {
                    ret += '';
                }
                const  noteToAdd = !(i % 2) ? notes[r[i]] : (notes[r[i]] == 't' ? 'k': notes[r[i]]);
                ret += noteToAdd;
            }
            return ret;
        }
    
        let rythms = [];

        for (r1=0; r1<notes.length; r1++){
            for (r2=0; r2<notes.length; r2++){
                for (r3=0; r3<notes.length; r3++){
                    for (r4=0; r4<notes.length; r4++){
                        for (r5=0; r5<notes.length; r5++){
                            for (r6=0; r6<notes.length; r6++){
                                for (r7=0; r7<notes.length; r7++){
                                    for (r8=0; r8<notes.length; r8++){
                                        rythms.push(getRythmStr([r1,r2,r3,r4,r5,r6,r7,r8], 4));
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        function getRandomArbitrary(min, max) {
            return Math.floor(Math.random() * (max - min) + min);
        }

        document.querySelector("#run").addEventListener("click", _=>{
            barCount = parseInt(document.querySelector("#barCount").value);
            console.log(`Generating ${barCount} bars`);
            document.querySelector("#result").innerHTML = "";
            for (i=0; i<barCount; i++) {
                newBar = rythms[getRandomArbitrary(0,rythms.length)]
                document.querySelector("#result").innerHTML += `${newBar}<br>`;
            }
        })

        document.querySelector("#run").click();

    </script>
</body>
</html>
